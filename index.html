<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <title>í•™ìŠµ ì¥ì†Œ í˜„í™©íŒ</title>
    
    <link rel="stylesheet" crossorigin href="./style.css">
    <script type="module" crossorigin src="./script.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
      /* [1. ê¸°ë³¸ ì„¤ì • ë° íš¨ê³¼] */
      #snow-canvas { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 9998; pointer-events: none; }
      .form, .notice, .aside-announcement, ul.notice-ul { display: none !important; }

      /* [2. 'ë”ë³´ê¸°' ì‚¬ì´ë“œë°” ìŠ¤íƒ€ì¼] */
      #advanced-features-container {
          margin-top: 15px; margin-bottom: 20px; padding: 12px;
          background: rgba(30, 32, 37, 0.8) !important; border-radius: 12px;
          border: 1px solid #444; animation: fadeIn 0.8s ease;
      }
      .feature-header { display: flex; justify-content: space-between; align-items: center; cursor: pointer; padding: 5px; color: #ffffff !important; font-weight: 700; user-select: none; }
      .feature-list { display: none; flex-direction: column; gap: 8px; margin-top: 12px; }
      .feature-list.active { display: flex; }
      
      .weather-box { background: rgba(255, 255, 255, 0.05); padding: 10px; border-radius: 8px; display: flex; align-items: center; justify-content: center; gap: 10px; margin-bottom: 5px; font-size: 0.85rem; color: #ddd; border: 1px solid #444; }
      .feature-btn { background: #2a2d35 !important; border: 1px solid #444 !important; color: #ffffff !important; padding: 10px; border-radius: 8px; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: 0.2s; display: flex; align-items: center; gap: 8px; }
      .feature-btn:hover { background: #333 !important; border-color: #666 !important; }

      .switch { position: relative; display: inline-block; width: 34px; height: 18px; margin-left: auto; }
      .switch input { opacity: 0; width: 0; height: 0; }
      .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #555; transition: .4s; border-radius: 20px; }
      .slider:before { position: absolute; content: ""; height: 12px; width: 12px; left: 3px; bottom: 3px; background-color: white; transition: .4s; border-radius: 50%; }
      input:checked + .slider { background-color: #2563eb; }
      input:checked + .slider:before { transform: translateX(16px); }

      #inline-bgm-container { display: none; margin-top: 5px; background: #15171c !important; border-radius: 8px; border: 1px solid #444; overflow: hidden; max-height: 180px; overflow-y: auto; }
      #inline-bgm-container.active { display: block !important; }
      .inline-bgm-item { display: flex !important; align-items: center !important; gap: 12px !important; padding: 10px !important; border-bottom: 1px solid #222 !important; cursor: pointer; }
      .inline-bgm-item:hover { background: #252830 !important; }
      .inline-bgm-cover { width: 30px !important; height: 30px !important; border-radius: 4px !important; object-fit: cover; }
      .inline-bgm-title { font-size: 0.8rem !important; font-weight: bold !important; color: #fff !important; }

      /* [3. ë¯¸ë‹ˆ í”Œë ˆì´ì–´ - í™•ì¥ ê¸°ëŠ¥ ë°˜ì˜] */
      #mini-player {
          position: fixed; bottom: 30px; left: 30px; z-index: 10000;
          display: flex; align-items: center; gap: 15px;
          background: rgba(15, 17, 21, 0.95); padding: 12px 22px 12px 12px;
          border-radius: 60px; border: 1px solid #444;
          box-shadow: 0 10px 30px rgba(0,0,0,0.8); backdrop-filter: blur(10px);
          transition: all 0.4s; width: auto; min-width: 220px;
          cursor: pointer; transform: translateY(150%);
      }
      #mini-player.active { transform: translateY(0); }
      #mini-player.expanded { border-radius: 25px; padding: 25px; flex-direction: column; max-width: 220px; bottom: 40px; left: 40px; }
      
      .vinyl-record { width: 55px; height: 55px; border-radius: 50%; background-size: cover; background-position: center; border: 3px solid #222; animation: spin 4s linear infinite; animation-play-state: paused; transition: 0.4s; box-shadow: 0 0 15px rgba(0,0,0,0.5); }
      #mini-player.expanded .vinyl-record { width: 140px; height: 140px; margin-bottom: 15px; }
      .vinyl-record.playing { animation-play-state: running; }
      @keyframes spin { 100% { transform: rotate(360deg); } }
      
      .player-info { color: white; display: flex; flex-direction: column; gap: 5px; }
      #mini-player.expanded .player-info { text-align: center; align-items: center; }
      .player-title { font-size: 0.9rem; font-weight: bold; max-width: 140px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
      #mini-player.expanded .player-title { font-size: 1.1rem; max-width: 180px; white-space: normal; margin-bottom: 15px; }

      .player-ctrl-box { display: flex; gap: 20px; align-items: center; }
      .ctrl-btn { background: none; border: none; color: #ccc; cursor: pointer; font-size: 1.3rem; transition: 0.2s; padding: 5px; }

      /* [4. ì‹œê°„í‘œ & ê¸‰ì‹ ëª¨ë‹¬ - ì •ë ¬ ìˆ˜ì •] */
      .modal-overlay { position: fixed !important; top: 0 !important; left: 0 !important; width: 100% !important; height: 100% !important; background: rgba(0, 0, 0, 0.85) !important; z-index: 20000 !important; display: none; align-items: center !important; justify-content: center !important; }
      .modal-window { background: #1e2025 !important; border: 1px solid #333 !important; border-radius: 16px !important; padding: 30px !important; box-shadow: 0 20px 50px rgba(0,0,0,0.6) !important; display: flex !important; flex-direction: column !important; max-width: 650px; width: 90% !important; }
      .timetable-table { width: 100% !important; border-collapse: collapse !important; margin-top: 20px !important; color: #eee !important; text-align: center !important; table-layout: fixed !important; }
      .timetable-table th { background: #2a2d35 !important; padding: 12px 5px !important; border: 1px solid #444 !important; color: #5ac4ff !important; font-size: 0.9rem; }
      .timetable-table td { padding: 12px 5px !important; border: 1px solid #333 !important; background: #15171c !important; font-size: 0.85rem; height: 45px; }

      /* [5. ê¸°íƒ€ ì‚¬ìœ  ë ˆì´ì•„ì›ƒ] */
        /* ê¸°íƒ€ ì‚¬ìœ  ì „ì²´ ë°°ê²½ ë° ë‘ ì°½ ë°°ì¹˜ */
        .etc-overlay { 
            position: fixed !important; top: 0 !important; left: 0 !important; width: 100% !important; height: 100% !important; 
            background: rgba(0, 0, 0, 0.8) !important; z-index: 15000 !important; 
            display: none; align-items: center !important; justify-content: center !important; 
            gap: 40px !important; backdrop-filter: blur(5px) !important; 
        }

        /* ì™¼ìª½ ì…ë ¥ì°½ ë°•ìŠ¤ & ì˜¤ë¥¸ìª½ ë¦¬ìŠ¤íŠ¸ ë°•ìŠ¤ ê³µí†µ */
        .window-reason, .window-project { 
            background: #1e2025 !important; border: 1px solid #333 !important; border-radius: 12px !important; 
            padding: 25px !important; box-shadow: 0 20px 50px rgba(0,0,0,0.6) !important; 
            display: flex !important; flex-direction: column !important; max-height: 85vh !important;
        }
        .window-reason { width: 420px !important; }
        .window-project { width: 380px !important; height: 520px !important; }

        /* ì…ë ¥ì°½ ë‚´ë¶€ ìŠ¤íƒ€ì¼ (í°ìƒ‰ ë°°ê²½ ë°©ì§€) */
        .modal-input { 
            width: 100% !important; padding: 14px !important; border-radius: 8px !important; 
            border: 1px solid #444 !important; background: #2a2d35 !important; 
            color: white !important; font-size: 1.1rem !important; outline: none !important; box-sizing: border-box !important; 
        }

        /* ìµœê·¼ ì‚¬ìœ  ë²„íŠ¼(ì¹©) ë””ìì¸ */
        .chip-container { display: flex !important; flex-wrap: wrap !important; gap: 10px !important; margin-top: 20px !important; }
        .recent-reason-btn { 
            background: rgba(255, 255, 255, 0.08) !important; border: 1px solid rgba(255, 255, 255, 0.1) !important; 
            color: #eee !important; padding: 8px 14px !important; border-radius: 10px !important; font-size: 0.85rem !important; 
            cursor: pointer !important; transition: 0.2s !important; backdrop-filter: blur(5px) !important;
        }
        .recent-reason-btn:hover { background: #2563eb !important; border-color: #3b82f6 !important; color: white !important; }

        /* í”„ë¡œì íŠ¸ì‹¤ í‘œ ìŠ¤íƒ€ì¼ */
        .table-container { flex-grow: 1 !important; overflow-y: auto !important; border: 1px solid #333 !important; border-radius: 8px !important; background: #15171c !important; }
        .project-table { width: 100% !important; border-collapse: collapse !important; text-align: center !important; font-size: 0.95rem !important; color: #aaa !important; }
        .project-table th { background: #252830 !important; color: #ccc !important; padding: 12px !important; border-bottom: 1px solid #444 !important; position: sticky !important; top: 0 !important; }
        .project-table td { padding: 10px !important; border-bottom: 1px solid #222 !important; }
        .table-select-btn { background: #2563eb !important; color: white !important; border: none !important; padding: 8px 0 !important; border-radius: 6px !important; cursor: pointer !important; width: 90% !important; font-weight: 600 !important; }
      /* [6. ì°¨ë‹¨ íŒì—…] */
      #restriction-popup { position: fixed !important; top: 20px !important; left: 50% !important; transform: translateX(-50%) !important; z-index: 30000 !important; background: #ef4444 !important; color: white !important; padding: 18px 30px !important; border-radius: 15px !important; display: none; box-shadow: 0 10px 40px rgba(239, 68, 68, 0.4) !important; align-items: center !important; gap: 15px !important; animation: slideDown 0.4s ease; }
      .admin-input { width: 55px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.3); color: white; font-size: 0.8rem; padding: 4px; border-radius: 4px; outline: none; text-align: center; }

      @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
      @keyframes slideDown { from { top: -100px; } to { top: 20px; } }

      /* ê°¤ëŸ¬ë¦¬ ëª¨ë‹¬ ë°°ê²½ */
        .gallery-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85); z-index: 25000;
            display: none; align-items: center; justify-content: center;
            backdrop-filter: blur(5px);
        }

        /* ê°¤ëŸ¬ë¦¬ ì°½ */
        .gallery-window {
            background: #2a2d35; border: 1px solid #444; border-radius: 16px;
            padding: 30px; width: 90%; max-width: 900px; height: 80vh;
            display: flex; flex-direction: column; box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        /* ì‚¬ì§„ ê·¸ë¦¬ë“œ */
        .gallery-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 40px; padding: 20px; overflow-y: auto; flex-grow: 1;
            background: rgba(0,0,0,0.2); border-radius: 10px;
        }

        /* í´ë¼ë¡œì´ë“œ í”„ë ˆì„ */
        .photo-frame {
            background: #ffffff; padding: 12px 12px 35px 12px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.3); position: relative;
            width: 160px; transition: transform 0.3s;
        }

        .photo-frame img { width: 100%; height: 140px; object-fit: cover; border: 1px solid #eee; }

        .photo-caption {
            color: #222; font-size: 0.8rem; text-align: center; margin-top: 10px;
            font-weight: bold; font-family: sans-serif;
        }

        /* í…Œì´í”„ íš¨ê³¼ */
        .photo-frame::before {
            content: ""; position: absolute; top: -15px; left: 50%;
            transform: translateX(-50%) rotate(-2deg);
            width: 70px; height: 25px;
            background: rgba(255, 255, 255, 0.4);
            backdrop-filter: blur(2px); border: 1px solid rgba(255,255,255,0.2);
        }

        /* ê°¤ëŸ¬ë¦¬ ë‚´ ë²„íŠ¼ ë°•ìŠ¤ */
        .gallery-btn-box {
            display: flex;
            gap: 8px;
            margin-top: 15px;
            justify-content: center;
            width: 100%;
        }

        .gallery-action-btn {
            padding: 6px 10px;
            font-size: 0.7rem;
            border: 1px solid #ddd;
            background: #f8f9fa;
            color: #333;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: 0.2s;
        }

        .gallery-action-btn:hover {
            background: #2563eb;
            color: white;
            border-color: #2563eb;
        }

        /* ì‚¬ì§„ í¬ê²Œë³´ê¸° ëª¨ë‹¬ */
        #largePhotoModal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.95); z-index: 30000;
            display: none; align-items: center; justify-content: center;
            cursor: zoom-out;
        }

        #largePhotoModal img {
            max-width: 90%; max-height: 90%;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            border: 5px solid white;
            border-radius: 4px;
        }

        /* [ì¤‘ì•™ ë©”ì¸ ì˜ì—­ ë°˜íˆ¬ëª… ì„¤ì •] */
        section, .section {
            background: rgba(15, 17, 21, 0.0) !important; /* ë°°ê²½ìƒ‰ì„ 70% ì •ë„ë¡œ íˆ¬ëª…í•˜ê²Œ */
            backdrop-filter: blur(10px); /* ë’¤ìª½ ë°°ê²½ì„ íë¦¿í•˜ê²Œ ë§Œë“¤ì–´ ê¸€ì ê°€ë…ì„± í™•ë³´ */
            border: 1px solid rgba(255, 255, 255, 0.1); /* í…Œë‘ë¦¬ë¥¼ ì‚´ì§ ì£¼ì–´ ê²½ê³„ì„  êµ¬ë¶„ */
            border-radius: 16px; /* ëª¨ì„œë¦¬ë¥¼ ë‘¥ê¸€ê²Œ */
        }

        /* ë§Œì•½ ê° ì¤„(Lane)ë„ íˆ¬ëª…í•˜ê²Œ í•˜ê³  ì‹¶ë‹¤ë©´ ì•„ë˜ ì½”ë“œë„ ì¶”ê°€í•˜ì„¸ìš” */
        .lane {
            background: rgba(255, 255, 255, 0.03) !important; /* ë§¤ìš° ì–‡ì€ í°ìƒ‰ íˆ¬ëª…ë„ */
            border-radius: 12px;
            margin: 5px;
        }

        /* ìì„(ì¹©)ë“¤ì´ ë„ˆë¬´ íˆ¬ëª…í•´ì§€ì§€ ì•Šë„ë¡ ê·¸ë¦¼ì ë³´ì • */
        .chip {
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3) !important;
        }

        /* ì „ë°˜ì ì¸ UI ìœ ë¦¬ íš¨ê³¼ í†µí•© ì„¤ì • */
        .topbar, 
        section, 
        .section, 
        .aside-summary {
            background: rgba(15, 17, 21, 0.0) !important;
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px; /* topbarì˜ ê²½ìš° ìƒë‹¨ì´ ë‘¥ê¸€ì–´ì§€ëŠ” ê²Œ ì‹«ë‹¤ë©´ ì•„ë˜ ë³„ë„ ì²˜ë¦¬ */
        }



        /* [BGM ë¦¬ìŠ¤íŠ¸ ëª¨ë‹¬ ì „ì²´ ìœ„ì¹˜ ì„¤ì •] */
        #bgmListModal {
            background: rgba(0, 0, 0, 0) !important; /* ë°°ê²½ ì–´ë‘ì›Œì§€ëŠ” íš¨ê³¼ ì œê±° */
            pointer-events: none; /* ë°°ê²½ì˜ ë‹¤ë¥¸ ìš”ì†Œ(ìì„ ë“±) í´ë¦­ ê°€ëŠ¥í•˜ê²Œ í•¨ */
            display: none; /* ê¸°ë³¸ì€ ìˆ¨ê¹€ (JSì—ì„œ flexë¡œ ë³€ê²½) */
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 25000;
            justify-content: flex-start !important; /* ì™¼ìª½ ì •ë ¬ */
            align-items: flex-end !important;   /* ì•„ë˜ìª½ ì •ë ¬ */
            padding-left: 30px;
            padding-bottom: 10px; /* ë¯¸ë‹ˆ í”Œë ˆì´ì–´ì™€ ê²¹ì¹˜ì§€ ì•Šê²Œ ìœ„ë¡œ ë„ì›€ */
        }

        /* [BGM ë¦¬ìŠ¤íŠ¸ ì°½ ë³¸ì²´] */
        #bgmListModal .modal-window {
            pointer-events: auto; /* ë¦¬ìŠ¤íŠ¸ ë‚´ë¶€ ìš”ì†ŒëŠ” í´ë¦­ ê°€ëŠ¥ */
            background: rgba(30, 32, 37, 0.95) !important; /* ì•½ê°„ íˆ¬ëª…í•œ ë‹¤í¬ ëª¨ë“œ */
            border: 1px solid #555 !important;
            border-radius: 16px !important;
            width: 320px !important; /* ë„ˆë¹„ë¥¼ ì¤„ì—¬ì„œ ìì„íŒ ê³µê°„ í™•ë³´ */
            max-height: 450px !important;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6) !important;
            margin: 0 !important;
            padding: 20px !important;
            animation: fadeIn 0.3s ease;
        }

        /* [BGM ë¦¬ìŠ¤íŠ¸ ìŠ¤í¬ë¡¤ ì˜ì—­] */
        .bgm-list-scroll {
            max-height: 280px;
            overflow-y: auto;
            margin-top: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            border: 1px solid #444;
        }

        /* [BGM ì•„ì´í…œ í–‰ ìŠ¤íƒ€ì¼] */
        .bgm-item-row {
            display: flex !important;
            align-items: center !important;
            gap: 12px !important;
            padding: 10px !important;
            border-bottom: 1px solid #333 !important;
            cursor: pointer;
            transition: 0.2s;
        }
        .bgm-item-row:hover { background: rgba(255, 255, 255, 0.08); }
        .bgm-item-row img { width: 42px !important; height: 42px !important; border-radius: 6px !important; object-fit: cover; }
        .bgm-item-row span { font-size: 0.9rem !important; color: #ffffff !important; font-weight: 600; }

        /* ì „ì²´ ë¬´í•œ ì¬ìƒ ë²„íŠ¼ */
        .loop-btn {
            background: #3a3a3a !important;
            color: white !important;
            width: 100%;
            margin-bottom: 10px;
            justify-content: center !important;
            font-weight: 800 !important;
        }
        .loop-btn.active { background: #16a34a !important; }



        /* [ì´ìŠ¤í„°ì—ê·¸: í­ë°œ íš¨ê³¼] */
        #boom-container {
            position: fixed; top: 50%; left: 50%; width: 0; height: 0;
            border-radius: 50%; z-index: 99999; opacity: 0; pointer-events: none;
            background: radial-gradient(circle, #fff, #ffbd3f, #ff3300, #330000);
            transform: translate(-50%, -50%);
        }
        .exploding-active { animation: boom-sequence 1.2s ease-out forwards; }
        @keyframes boom-sequence {
            0% { width: 0; height: 0; opacity: 1; filter: brightness(2); }
            30% { width: 150vmax; height: 150vmax; opacity: 0.9; }
            100% { width: 200vmax; height: 200vmax; opacity: 0; }
        }
        .shake-screen { animation: shake-hard 0.5s linear; }
        @keyframes shake-hard { 
            0%, 100% { transform: translate(0,0); } 
            25% { transform: translate(-10px, 10px); } 
            75% { transform: translate(10px, -10px); } 
        }

        /* [ì´ìŠ¤í„°ì—ê·¸: í”¼ íŠ€ê¹€ ì„¤ì •] */
        #mini-player { overflow: hidden !important; } /* í”¼ê°€ ë°–ìœ¼ë¡œ ì•ˆ ë‚˜ê°€ê²Œ */

        .blood-splat {
            position: absolute !important; pointer-events: none !important;
            z-index: 5 !important; opacity: 0;
        }
        .splat-animate { animation: splat-hit 0.2s ease-out forwards; }
        @keyframes splat-hit {
            0% { transform: scale(0.3) rotate(-20deg); opacity: 0; }
            100% { transform: scale(1) rotate(0deg); opacity: 0.9; }
        }

        /* í”¼ íŠ€ê¸¸ ë•Œ í”Œë ˆì´ì–´ ìŠ¤íƒ€ì¼ */
        .blood-stained-container {
            border-color: #ff0000 !important;
            box-shadow: 0 0 30px rgba(255, 0, 0, 0.8) !important;
        }
        .blood-stained-container .player-info, 
        .blood-stained-container .ctrl-btn i {
            color: #ffcccc !important;
            text-shadow: 0 0 8px #ff0000;
        }



        /* ì˜ìƒ ìŠ¤íƒ€ì¼ */
        #reze-video {
            position: absolute;
            top: 0; left: 0;
            width: 100%; height: 100%;
            object-fit: cover; /* í”Œë ˆì´ì–´ í¬ê¸°ì— ë§ê²Œ ì±„ì›€ */
            z-index: 4; /* í”¼(5)ë³´ë‹¤ëŠ” ë’¤, ë°°ê²½ë³´ë‹¤ëŠ” ì• */
            border-radius: inherit;
            opacity: 0;
            transition: opacity 0.5s;
        }

        /* ì˜ìƒì´ í™œì„±í™”ë˜ì—ˆì„ ë•Œ ë…¸ì¶œ */
        .video-active #reze-video {
            display: block !important;
            opacity: 1;
        }

        /* ì˜ìƒ ì¬ìƒ ì¤‘ì—ëŠ” LPíŒê³¼ ì»¤ë²„ë¥¼ ê°€ë¦¼ */
        .video-active .vinyl-record, .video-active #mini-title {
            opacity: 0;
            pointer-events: none;
        }
    </style>
  </head>
  <body>
    <div id="boom-container"></div>

    <canvas id="snow-canvas"></canvas>
    <div id="app"></div>

    <div id="custom-modal-overlay" class="etc-overlay">
        <div class="window-reason">
            <h3 class="window-title" style="color:#fff; font-size:1.3rem; font-weight:700; border-bottom:1px solid #333; padding-bottom:15px; text-align:center; margin-bottom:20px;">ê¸°íƒ€ ì´ë™ ì‚¬ìœ  ì…ë ¥</h3>
            <p style="color:#fff; font-size:0.9rem; margin-bottom:10px; font-weight:600;">ğŸ“ ì‚¬ìœ  ì…ë ¥</p>
            <input type="text" id="custom-reason-input" class="modal-input" placeholder="ì‚¬ìœ ë¥¼ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off">
            
            <div id="recent-reasons-container" style="display: none;">
                <p style="color:#888; font-size:0.75rem; margin:20px 0 8px;">ìµœê·¼ ì‚¬ìš© / ê³ ì •</p>
                <div id="recent-reasons-list" class="chip-container"></div>
            </div>
            
            <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:auto; padding-top:20px;">
                <button id="modal-btn-cancel" style="background:#333; color:#ccc; border:none; padding:12px 25px; border-radius:10px; cursor:pointer; font-weight:700;">ì·¨ì†Œ</button>
                <button id="modal-btn-save" style="background:#2563eb; color:white; border:none; padding:12px 25px; border-radius:10px; cursor:pointer; font-weight:700;">í™•ì¸</button>
            </div>
        </div>

        <div class="window-project">
            <h3 class="window-title" style="color:#fff; font-size:1.3rem; font-weight:700; border-bottom:1px solid #333; padding-bottom:15px; text-align:center; margin-bottom:20px;">í”„ë¡œì íŠ¸ì‹¤ ëª©ë¡</h3>
            <div class="table-container">
                <table class="project-table">
                    <thead>
                        <tr><th width="35%">ìœ„ì¹˜</th><th width="65%">ëª…ì¹­</th></tr>
                    </thead>
                    <tbody id="project-table-body">
                        </tbody>
                </table>
            </div>
        </div>
    </div>

    <div id="timetableModal" class="modal-overlay">
        <div class="modal-window">
            <h2 style="color:white; margin:0 0 15px 0;"><i class="fas fa-calendar-alt"></i> í•™ê¸‰ ì‹œê°„í‘œ</h2>
            <div style="display:flex; gap:10px; margin-bottom:15px;">
                <select id="gradeSelector" style="background:#2a2d35; color:#fff; border:1px solid #444; padding:5px; border-radius:6px;"></select>
                <select id="classSelector" style="background:#2a2d35; color:#fff; border:1px solid #444; padding:5px; border-radius:6px;"></select>
            </div>
            <div id="timetableContainer" style="max-height: 400px; overflow-y: auto;"></div>
            <button onclick="closeModal('timetableModal')" style="margin-top:20px; background:#333; color:white; border:none; padding:10px; border-radius:8px; cursor:pointer; font-weight:700;">ë‹«ê¸°</button>
        </div>
    </div>

    <div id="mealModal" class="modal-overlay">
        <div class="modal-window">
            <h2 style="color:white; margin:0 0 15px 0;"><i class="fas fa-utensils"></i> ì˜¤ëŠ˜ì˜ ì ì‹¬ê¸‰ì‹</h2>
            <div id="mealContainer" style="line-height:2.0; color:#ddd; text-align:center; font-size:1.1rem; background:#15171c; padding:20px; border-radius:10px;">ê¸‰ì‹ ë¡œë”© ì¤‘...</div>
            <button onclick="closeModal('mealModal')" style="margin-top:20px; background:#333; color:white; border:none; padding:10px; border-radius:8px; cursor:pointer; font-weight:700;">ë‹«ê¸°</button>
        </div>
    </div>

    <div id="restriction-popup">
        <input type="password" id="admin-pw" class="admin-input" placeholder="ë¹„ë°€ë²ˆí˜¸ì…ë ¥" maxlength="4">
        <div style="flex:1"><b id="restrict-title" style="display:block">ğŸš« ì¬ìƒ ë¶ˆê°€ ì‹œê°„</b><small id="restriction-msg"></small></div>
    </div>

    <div id="mini-player" onclick="toggleExpand(event)">
        <video id="reze-video" 
            src="./asset/reze_video.mp4" 
            muted 
            playsinline 
            preload="auto"
            style="display:none; position:absolute; top:0; left:0; width:100%; height:100%; object-fit:cover; border-radius:inherit; z-index:4;">
        </video>        
        <div id="mini-cover" class="vinyl-record"></div>
        <div class="player-info">
            <span id="mini-title" class="player-title">ë…¸ë˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</span>
            <div class="player-ctrl-box">
                <button class="ctrl-btn" onclick="handlePlayBtn(event)"><i id="play-icon" class="fas fa-play"></i></button>
                <button class="ctrl-btn" onclick="stopMusic(event)"><i class="fas fa-stop"></i></button>
            </div>
        </div>
        <audio id="bgm-audio"></audio>
    </div>

    



    <script>
// ==========================================
// [1] ì„¤ì • ë°ì´í„° (API í‚¤, BGM, ê°¤ëŸ¬ë¦¬)
// ==========================================
const MEAL_KEY = '819b209aef6e4bc6921421155d08c60f';
const TIME_KEY = 'fb54814355634dc9b29c7bb7b7bd028c';
const KMA_KEY = 'nLdG_5HgQ9a3Rv-R4EPWMg'; // ê¸°ìƒì²­ í—ˆë¸Œ í‚¤
const ADMIN_PW = "1224";

const BGM_LIST = [
    { title: "IRIS OUT", cover: "./asset/irisout_img.png", src: "./asset/irisout.mp3" },
    { title: "All I want for Christmas", cover: "./asset/all i want.jpg", src: "./asset/All I Want for Christmas Is You.mp3" },
];

const GALLERY_DATA = [
    { url: "./gallery/24_dicon.png", caption: "ë´„ë‚  24ê¸°ë””ì»¨" },
    { url: "./gallery/1765533854112.jpg", caption: "ì²´ìœ¡ëŒ€íšŒ" },
    { url: "./gallery/bizcool.png", caption: "ë¹„ì¦ˆì¿¨ Festa!!" },
    { url: "./gallery/1752900229515.jpg", caption: "ë””ë¯¸ê³ " },
    { url: "./gallery/1753174727796.jpg", caption: "ë””ë¯¸ê³ _2" },
    { url: "./gallery/20250407_183927.jpg", caption: "ë””ë¯¸ê³ _3" },
    { url: "./gallery/1753167395914.jpg", caption: "ë””ë¯¸ê³ _4" },
    { url: "./gallery/winter.jpg", caption: "ê²¨ìš¸" },
    { url: "./gallery/Winter_style_PowerPoint_background_purple._9ce52c14-ac0b-4820-a3d7-4d68399b9a94_Image Enhancer.jpg", caption: "ê²¨ìš¸_2" },
    { url: "./gallery/9 (95í¼ì„¼íŠ¸ íšŒìƒ‰) íšŒìƒ‰ ë‹¨ìƒ‰ ë°°ê²½í™”ë©´ 180303.jpg", caption: "ë‹¨ìƒ‰_1" },
    { url: "./gallery/13 (íšŒìƒ‰ 3) íšŒìƒ‰ ë‹¨ìƒ‰ ë°°ê²½í™”ë©´ 180303.png", caption: "ë‹¨ìƒ‰_2" },
    { url: "./gallery/eventbg-1.png", caption: "í¬ë¦¬ìŠ¤ë§ˆìŠ¤ë°°ê²½" },
];

const PROJECT_DATA = [
    { loc: "ë³¸ê´€3ì¸µ", name: "301í˜¸" },
    { loc: "", name: "302í˜¸" },
    { loc: "", name: "303í˜¸" },
    { loc: "", name: "304í˜¸" },
    { loc: "", name: "305í˜¸" },
    { loc: "", name: "306í˜¸" },
    { loc: "", name: "307í˜¸" },
    { loc: "ë³¸ê´€2ì¸µ", name: "201í˜¸" },
    { loc: "", name: "202í˜¸" },
    { loc: "", name: "203í˜¸" },
    { loc: "", name: "íšŒê³„ì‹¤ë¬´ì‹¤ìŠµì‹¤" },
    { loc: "", name: "ê´‘ê³ ì½˜í…ì¸ ì œì‘ì‹¤ìŠµì‹¤" },
    { loc: "ë³¸ê´€1ì¸µ", name: "ë¹„ì¦ˆì¿¨ì‹¤" },
    { loc: "", name: "ë³´ê±´ì‹¤" },
    { loc: "ì‹ ê´€1ì¸µ", name: "ì„¸ë¯¸ë‚˜ì‹¤" },
    { loc: "", name: "ì‚¬ë¬¼ì¸í„°ë„·ì‹¤" },
    { loc: "", name: "ì‹œì²­ê°ì‹¤" },
    { loc: "", name: "íœ´ë¨¸ë…¸ì´ë“œì‹¤" },
    { loc: "", name: "ITí”„ë¡œì íŠ¸ì‹¤" },
    { loc: "ì‹ ê´€2ì¸µ", name: "ë©€í‹°ë¯¸ë””ì–´ì‹¤" },
    { loc: "", name: "í¬ë¦¬ì—ì´í‹°ë¸ŒìŠ¤íŠœë””ì˜¤ì‹¤" },
    { loc: "", name: "ìŒì•…ì‹¤" },
    { loc: "ì‹ ê´€3ì¸µ", name: "ì• ë‹ˆë©”ì´ì…˜ì½˜í…ì¸ ì œì‘ì‹¤ (3Dì‹¤)" },
    { loc: "", name: "ë¹…ë°ì´í„°ë¶„ì„ì‹¤" },
    { loc: "ì‹ ê´€4ì¸µ", name: "ëŒ€ê°•ë‹¹" },
    { loc: "í•™ë´‰ê´€/ìš°ì •í•™ì‚¬", name: "ê¸°ìˆ™ì‚¬" },
    { loc: "", name: "ë¯¸ìˆ ì‹¤" },
    ];

// ì „ì—­ ìƒíƒœ ë³€ìˆ˜
let isPlaying = false;
let currentBgmData = null;
let popupTimer = null;
let isSnowActive = true;



// ==========================================
// [2] ì‹œê°„ ì œí•œ ë° ìš°íšŒ ë¡œì§
// ==========================================
function checkTimeRestriction() {
    const bypassUntil = localStorage.getItem('music_bypass_until');
    if (bypassUntil && Date.now() < parseInt(bypassUntil)) return { restricted: false };

    const now = new Date();
    const day = now.getDay();
    const time = now.getHours() * 100 + now.getMinutes();

    if (day >= 1 && day <= 5) { // ì›”~ê¸ˆ
        const ranges = [
            { s: 850,  e: 1250, m: "ì˜¤ì „ ìˆ˜ì—… ì‹œê°„" }, { s: 1347, e: 1630, m: "ì˜¤í›„ ìˆ˜ì—… ì‹œê°„" },
            { s: 1708, e: 1830, m: "ë°©ê³¼í›„ ì‹œê°„" }, { s: 1945, e: 2105, m: "ì•¼ì 1íƒ€ì„" }, { s: 2130, e: 2300, m: "ì•¼ì 2íƒ€ì„" }
        ];
        for (const r of ranges) if (time >= r.s && time <= r.e) return { restricted: true, msg: r.m };
    } else if (day === 0) { // ì¼ìš”ì¼
        const sunRanges = [{ s: 1955, e: 2100, m: "ì¼ìš” ììŠµ 1íƒ€ì„" }, { s: 2119, e: 2230, m: "ì¼ìš” ììŠµ 2íƒ€ì„" }];
        for (const r of sunRanges) if (time >= r.s && time <= r.e) return { restricted: true, msg: r.m };
    }
    return { restricted: false };
}

// ì‹¤ì‹œê°„ ê°ì‹œ (ìë™ ì •ì§€)
setInterval(() => {
    checkSnowAutoOff();
    const bypass = localStorage.getItem('music_bypass_until');
    if (isPlaying && (!bypass || Date.now() > parseInt(bypass))) {
        const check = checkTimeRestriction();
        if (check.restricted) {
            document.getElementById('bgm-audio').pause();
            document.getElementById('mini-cover').classList.remove('playing');
            document.getElementById('play-icon').className = 'fas fa-play';
            isPlaying = false;
            showRestrictionPopup(check.msg, 5000);
        }
    }
}, 1000);

// ==========================================
// [3] API í˜¸ì¶œ (ê¸‰ì‹, ì‹œê°„í‘œ, ë‚ ì”¨)
// ==========================================
// [ê¸‰ì‹ í˜¸ì¶œ]
async function fetchMeal() {
    const container = document.getElementById('mealContainer');
    if (!container) return;

    container.innerHTML = '<p style="color:#5ac4ff; text-align:center;">ì˜¤ëŠ˜ì˜ ë©”ë‰´ë¥¼ ê°€ì ¸ì˜¤ê³  ìˆìŠµë‹ˆë‹¤...</p>';

    // í•œêµ­ ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ë‚ ì§œ ë¬¸ìì—´(YYYYMMDD) ìƒì„±
    const now = new Date();
    const kst = new Date(now.toLocaleString("en-US", {timeZone: "Asia/Seoul"}));
    const y = kst.getFullYear();
    const m = String(kst.getMonth() + 1).padStart(2, '0');
    const d = String(kst.getDate()).padStart(2, '0');
    const dateStr = `${y}${m}${d}`;

    try {
        const res = await fetch(`https://open.neis.go.kr/hub/mealServiceDietInfo?KEY=${MEAL_KEY}&Type=json&ATPT_OFCDC_SC_CODE=J10&SD_SCHUL_CODE=7530560&MLSV_YMD=${dateStr}`);
        const data = await res.json();
        
        if (data.mealServiceDietInfo && data.mealServiceDietInfo[1] && data.mealServiceDietInfo[1].row) {
            const menu = data.mealServiceDietInfo[1].row[0].DDISH_NM.replace(/<br\/>/g, '<br>');
            container.innerHTML = `<div style="text-align:center; padding:10px;">${menu}</div>`;
        } else {
            container.innerHTML = "<p style='text-align:center;'>ì˜¤ëŠ˜ì˜ ê¸‰ì‹ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ğŸ±</p>";
        }
    } catch (e) {
        container.innerHTML = "<p style='text-align:center; color:#ef4444;'>ê¸‰ì‹ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.</p>";
    }
}

// [ì‹œê°„í‘œ í˜¸ì¶œ]
async function fetchTimetable() {
    const container = document.getElementById('timetableContainer');
    const gs = document.getElementById('gradeSelector');
    const cs = document.getElementById('classSelector');
    
    if (!container || !gs || !cs) return;

    container.innerHTML = '<p style="color:#5ac4ff; text-align:center; padding:20px;">ì‹œê°„í‘œ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>';

    const grade = gs.value;
    const classNum = cs.value;

    // í•œêµ­ ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ì´ë²ˆ ì£¼ ì›”ìš”ì¼ ê³„ì‚°
    const now = new Date();
    const kst = new Date(now.toLocaleString("en-US", {timeZone: "Asia/Seoul"}));
    const day = kst.getDay(); // 0:ì¼, 1:ì›”...
    const gapToMonday = (day === 0) ? -6 : 1 - day;
    
    const monday = new Date(kst);
    monday.setDate(kst.getDate() + gapToMonday);

    const daysArr = [];
    for (let i = 0; i < 5; i++) {
        const targetDay = new Date(monday);
        targetDay.setDate(monday.getDate() + i);
        
        const y = targetDay.getFullYear();
        const m = String(targetDay.getMonth() + 1).padStart(2, '0');
        const d = String(targetDay.getDate()).padStart(2, '0');
        daysArr.push(`${y}${m}${d}`);
    }

    try {
        const requests = daysArr.map(d => 
            fetch(`https://open.neis.go.kr/hub/hisTimetable?KEY=${TIME_KEY}&Type=json&ATPT_OFCDC_SC_CODE=J10&SD_SCHUL_CODE=7530560&GRADE=${grade}&CLASS_NM=${classNum}&ALL_TI_YMD=${d}`)
            .then(r => r.json())
        );
        const results = await Promise.all(requests);
        const tableData = results.map(r => (r.hisTimetable && r.hisTimetable[1].row ? r.hisTimetable[1].row : []));
        
        let html = '<table class="timetable-table"><thead><tr><th style="width:15%">êµì‹œ</th><th>ì›”</th><th>í™”</th><th>ìˆ˜</th><th>ëª©</th><th>ê¸ˆ</th></tr></thead><tbody>';
        for (let p = 1; p <= 7; p++) {
            html += `<tr><td style="font-weight:bold; color:#5ac4ff;">${p}</td>`;
            for (let i = 0; i < 5; i++) {
                const dayData = tableData[i];
                const subject = dayData.find(x => x.PERIO == p)?.ITRT_CNTNT || '-';
                html += `<td>${subject}</td>`;
            }
            html += '</tr>';
        }
        container.innerHTML = html + '</tbody></table>';
        
        localStorage.setItem('last_grade', grade);
        localStorage.setItem('last_class', classNum);
    } catch (e) {
        container.innerHTML = '<p style="color:#ef4444; text-align:center;">ì‹œê°„í‘œ ë¡œë“œ ì‹¤íŒ¨</p>';
    }
}





// [ë‚ ì”¨ í˜¸ì¶œ - Open-Meteo ì‚¬ìš© (ì¸ì¦í‚¤ í•„ìš”ì—†ìŒ)]
async function fetchWeather() {
    const weatherBox = document.getElementById('weather-display');
    if (!weatherBox) return;

    try {
        // ì•ˆì‚°ì‹œ ìƒë¡êµ¬/ë‹¨ì›êµ¬ ë¶€ê·¼ ìœ„ë„, ê²½ë„
        const lat = 37.3217;
        const lon = 126.8309;
        const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,weather_code`);
        const data = await res.json();

        if (data && data.current) {
            const temp = Math.round(data.current.temperature_2m);
            const code = data.current.weather_code;
            
            // WMO Weather interpretation codes (WW) ë§¤í•‘
            let status = "ë§‘ìŒ";
            let icon = "fa-sun";
            let iconColor = "#ffcf4d";

            if (code === 0) { status = "ë§‘ìŒ"; icon = "fa-sun"; }
            else if (code >= 1 && code <= 3) { status = "êµ¬ë¦„ì¡°ê¸ˆ"; icon = "fa-cloud-sun"; iconColor = "#ddd"; }
            else if (code >= 45 && code <= 48) { status = "ì•ˆê°œ"; icon = "fa-smog"; iconColor = "#aaa"; }
            else if (code >= 51 && code <= 67) { status = "ë¹„"; icon = "fa-cloud-showers-heavy"; iconColor = "#5ac4ff"; }
            else if (code >= 71 && code <= 77) { status = "ëˆˆ"; icon = "fa-snowflake"; iconColor = "#fff"; }
            else if (code >= 80) { status = "ì†Œë‚˜ê¸°"; icon = "fa-cloud-rain"; iconColor = "#5ac4ff"; }

            weatherBox.innerHTML = `
                <i class="fas ${icon}" style="color:${iconColor}"></i> ì•ˆì‚° 
                <span style="font-weight:800;color:#fff">${temp}Â°C</span> ${status}
            `;
        }
    } catch (e) {
        weatherBox.innerHTML = "ë‚ ì”¨ ì •ë³´ ë¡œë“œ ì‹¤íŒ¨";
    }
}

// 30ë¶„ë§ˆë‹¤ ë‚ ì”¨ ì—…ë°ì´íŠ¸
setInterval(fetchWeather, 30 * 60 * 1000);

// ==========================================
// [4] ë©”ì¸ UI ë Œë”ë§ ë° ëª¨ë‹¬ ì œì–´
// ==========================================
function renderFeatures() {
    const aside = document.querySelector('aside');
    // asideê°€ ì—†ê±°ë‚˜ ì´ë¯¸ ì»¨í…Œì´ë„ˆê°€ ìƒì„±ë˜ì—ˆë‹¤ë©´ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ
    if (!aside || document.getElementById('advanced-features-container')) return;

    // 1. ê¸°ì¡´ ê³µì§€ì‚¬í•­ ë ˆì´ì•„ì›ƒ ìˆ¨ê¸°ê¸° (ì„ íƒ ì‚¬í•­)
    const originalNotice = aside.querySelector('.notice'); 
    if (originalNotice) originalNotice.style.display = 'none';

    // 2. ìƒˆë¡œìš´ ì»¨í…Œì´ë„ˆ ìƒì„±
    const div = document.createElement('div');
    div.id = 'advanced-features-container';
    
    // 3. ë‚´ë¶€ UI êµ¬ì¡° (BGM ì¸ë¼ì¸ ì»¨í…Œì´ë„ˆ ì œê±°ë¨)
    div.innerHTML = `
        <div class="feature-header" onclick="handleFeatureHeaderClick(this)">
            <span>ë”ë³´ê¸°</span>
            <i class="fas fa-chevron-right"></i>
        </div>
        <div class="feature-list">
            <div id="weather-display" class="weather-box">
                <i class="fas fa-spinner fa-spin"></i> ë‚ ì”¨ ë¡œë“œ ì¤‘...
            </div>

            <div class="feature-btn" style="justify-content:space-between; cursor:default">
                <span>â„ï¸ ëˆˆ ë‚´ë¦¬ê¸°</span>
                <label class="switch">
                    <input type="checkbox" id="snow-toggle" checked onchange="toggleSnow(this.checked)">
                    <span class="slider"></span>
                </label>
            </div>

            <button class="feature-btn" onclick="openModal('timetableModal')">
                <i class="fas fa-calendar-alt" style="color:#4ade80"></i> ì‹œê°„í‘œ
            </button>
            <button class="feature-btn" onclick="openModal('mealModal')">
                <i class="fas fa-utensils" style="color:#fb923c"></i> ê¸‰ì‹
            </button>
            <button class="feature-btn" onclick="openGallery()">
                <i class="fas fa-images" style="color:#ff6b6b"></i> ê°¤ëŸ¬ë¦¬
            </button>
            <button class="feature-btn" onclick="openModal('bgmListModal')">
                <i class="fas fa-music" style="color:#c084fc"></i> BGM ë¦¬ìŠ¤íŠ¸
            </button>
        </div>
    `;

    // 4. ì‚¬ì´ë“œë°”ì˜ í†µê³„ì°½(div) ë‹¤ìŒì— ì‚½ì…
    const stats = aside.querySelector('div');
    if (stats) {
        aside.insertBefore(div, stats.nextSibling);
    } else {
        aside.appendChild(div);
    }

    // 5. ìƒì„± ì§í›„ ë‚ ì”¨ ì •ë³´ ê°€ì ¸ì˜¤ê¸° í˜¸ì¶œ
    if (typeof fetchWeather === 'function') {
        fetchWeather();
    }
}

// 0.5ì´ˆë§ˆë‹¤ ì²´í¬ (SPA í™˜ê²½ì—ì„œ ì—˜ë¦¬ë¨¼íŠ¸ê°€ ì‚¬ë¼ì¡Œë‹¤ ë‚˜íƒ€ë‚  ë•Œë¥¼ ëŒ€ë¹„)
setInterval(renderFeatures, 500);

/**
 * ë”ë³´ê¸° í—¤ë” í´ë¦­ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
 */
function handleFeatureHeaderClick(header) {
    const list = header.nextElementSibling;
    const icon = header.querySelector('i');
    
    list.classList.toggle('active');
    
    if (list.classList.contains('active')) {
        icon.className = 'fas fa-chevron-down';
    } else {
        icon.className = 'fas fa-chevron-right';
    }
}

// ë³´ì¡° í•¨ìˆ˜ë“¤ (ì „ì—­ ë°°ì¹˜)
function handleFeatureHeaderClick(header) {
    const list = header.nextElementSibling;
    const icon = header.querySelector('i');
    list.classList.toggle('active');
    icon.className = list.classList.contains('active') ? 'fas fa-chevron-down' : 'fas fa-chevron-right';
}

// [ëª¨ë‹¬ ì—´ê¸° í•¨ìˆ˜ - ê°€ì¥ ì•ˆì •ì ì¸ ë²„ì „]
function openModal(id) {
    const modal = document.getElementById(id);
    if (!modal) return;
    
    modal.style.display = 'flex';

    if (id === 'bgmListModal') {
        // BGM ëª¨ë‹¬ì„ ì—´ ë•Œ ë¦¬ìŠ¤íŠ¸ë¥¼ ê·¸ë¦¬ëŠ” í•¨ìˆ˜ë¥¼ ê°•ì œë¡œ í˜¸ì¶œ
        renderFullBgmList(); 
    } 
    else if (id === 'timetableModal') {
        // ... ê¸°ì¡´ ì‹œê°„í‘œ ë¡œì§ ...
        const gs = document.getElementById('gradeSelector');
        const cs = document.getElementById('classSelector');
        if (gs && gs.options.length === 0) {
            for (let i = 1; i <= 3; i++) gs.add(new Option(i + 'í•™ë…„', i));
            for (let i = 1; i <= 6; i++) cs.add(new Option(i + 'ë°˜', i));
            gs.value = localStorage.getItem('last_grade') || '1';
            cs.value = localStorage.getItem('last_class') || '2';
            gs.onchange = fetchTimetable;
            cs.onchange = fetchTimetable;
        }
        fetchTimetable();
    } 
    else if (id === 'mealModal') {
        fetchMeal();
    }
}

// [ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜]
function closeModal(id) {
    const modal = document.getElementById(id);
    if (modal) modal.style.display = 'none';
}

// ê°¤ëŸ¬ë¦¬ ì—´ê¸° ë° ë Œë”ë§
function openGallery() {
    const container = document.getElementById('galleryContainer');
    if (!container) return;
    
    container.innerHTML = ''; // ì´ˆê¸°í™”

    GALLERY_DATA.forEach(photo => {
        const frame = document.createElement('div');
        frame.className = 'photo-frame';
        const rotate = (Math.random() * 10 - 5).toFixed(1);
        frame.style.transform = `rotate(${rotate}deg)`;
        
        frame.innerHTML = `
            <img src="${photo.url}" alt="photo" onerror="this.src='https://via.placeholder.com/150?text=No+Image'">
            <div class="photo-caption">${photo.caption}</div>
            <div class="gallery-btn-box">
                <button class="gallery-action-btn" onclick="viewLargePhoto('${photo.url}')">ì‚¬ì§„ë³´ê¸°</button>
                <button class="gallery-action-btn" onclick="setDashboardBackground('${photo.url}')">ë°°ê²½ì„¤ì •</button>
            </div>
        `;
        container.appendChild(frame);
    });
    
    document.getElementById('galleryModal').style.display = 'flex';
}

// ì‚¬ì§„ í¬ê²Œë³´ê¸° ê¸°ëŠ¥
function viewLargePhoto(url) {
    const modal = document.getElementById('largePhotoModal');
    const img = document.getElementById('largePhotoImg');
    img.src = url;
    modal.style.display = 'flex';
}

// [1] ë°°ê²½í™”ë©´ ì„¤ì • ë° ì €ì¥ í•¨ìˆ˜ (ìˆ˜ì •)
function setDashboardBackground(url) {
    // localStorageì— ë°°ê²½ URL ì €ì¥
    localStorage.setItem('dashboard_bg', url);

    // ì¦‰ì‹œ ì ìš©
    applyBackground(url);

    alert("ì ìš©ì™„ë£Œ.");
}

// [2] ì‹¤ì œ ë°°ê²½ì„ í™”ë©´ì— ì…íˆëŠ” ë³´ì¡° í•¨ìˆ˜ (ì¶”ê°€)
function applyBackground(url) {
    if (!url) return;
    
    // ê°€ë…ì„±ì„ ìœ„í•´ ì–´ë‘ìš´ ì˜¤ë²„ë ˆì´(linear-gradient)ë¥¼ í•¨ê»˜ ì ìš©
    document.body.style.backgroundImage = `linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6)), url('${url}')`;
    document.body.style.backgroundSize = 'cover';
    document.body.style.backgroundPosition = 'center';
    document.body.style.backgroundAttachment = 'fixed';
    document.body.style.backgroundRepeat = 'no-repeat';
}

// [3] í˜ì´ì§€ ë¡œë“œ ì‹œ ì €ì¥ëœ ë°°ê²½ ë¶ˆëŸ¬ì˜¤ê¸° (ì¶”ê°€)
// window.onload ë¶€ë¶„ì´ë‚˜ ìŠ¤í¬ë¦½íŠ¸ í•˜ë‹¨ì— ë„£ì–´ì£¼ì„¸ìš”.
window.addEventListener('load', () => {
    const savedBg = localStorage.getItem('dashboard_bg');
    if (savedBg) {
        applyBackground(savedBg);
    }
});

// ==========================================
// [5] BGM ë° ê¸°íƒ€ ì œì–´
// ==========================================
function renderBgmList() {
    const bgmBox = document.getElementById('inline-bgm-container');
    if (!bgmBox || bgmBox.children.length > 0) return;
    BGM_LIST.forEach(bgm => {
        const item = document.createElement('div');
        item.className = 'inline-bgm-item';
        item.innerHTML = `<img src="${bgm.cover}" class="inline-bgm-cover"><span class="inline-bgm-title">${bgm.title}</span>`;
        item.onclick = (e) => { e.stopPropagation(); tryPlayMusic(bgm); };
        bgmBox.appendChild(item);
    });
}

function toggleInlineBgm() { document.getElementById('inline-bgm-container').classList.toggle('active'); }

function tryPlayMusic(bgm) {
    const check = checkTimeRestriction();
    if (check.restricted) return showRestrictionPopup(check.msg, 13000);
    const audio = document.getElementById('bgm-audio');
    currentBgmData = bgm; audio.src = bgm.src; audio.play(); isPlaying = true;
    updatePlayerUI();
}

function handlePlayBtn(e) {
    e.stopPropagation(); if (!currentBgmData) return;
    const check = checkTimeRestriction();
    if (!isPlaying && check.restricted) return showRestrictionPopup(check.msg, 13000);
    const audio = document.getElementById('bgm-audio');
    if (isPlaying) { audio.pause(); document.getElementById('mini-cover').classList.remove('playing'); document.getElementById('play-icon').className = 'fas fa-play'; }
    else { audio.play(); document.getElementById('mini-cover').classList.add('playing'); document.getElementById('play-icon').className = 'fas fa-pause'; }
    isPlaying = !isPlaying;
}

function updatePlayerUI() {
    document.getElementById('mini-player').classList.add('active');
    document.getElementById('mini-cover').style.backgroundImage = `url('${currentBgmData.cover}')`;
    document.getElementById('mini-cover').classList.add('playing');
    document.getElementById('mini-title').innerText = currentBgmData.title;
    document.getElementById('play-icon').className = 'fas fa-pause';
}

function stopMusic(e) { e.stopPropagation(); document.getElementById('bgm-audio').pause(); document.getElementById('mini-player').classList.remove('active', 'expanded'); isPlaying = false; }
function toggleExpand(e) { if (!e.target.closest('.ctrl-btn')) document.getElementById('mini-player').classList.toggle('expanded'); }

function showRestrictionPopup(msg, dur) {
    const p = document.getElementById('restriction-popup');
    document.getElementById('restrict-title').innerText = "ì¬ìƒ ë¶ˆê°€ ì‹œê°„";
    document.getElementById('restriction-msg').innerText = `${msg}ì…ë‹ˆë‹¤.`;
    p.style.display = 'flex'; p.style.background = "#ef4444";
    clearTimeout(popupTimer);
    popupTimer = setTimeout(() => { p.style.display = 'none'; }, dur);
}

// íŒ¨ìŠ¤ì›Œë“œ ì…ë ¥
window.onload = () => {
    document.getElementById('admin-pw').oninput = function() {
        if (this.value === ADMIN_PW) {
            localStorage.setItem('music_bypass_until', Date.now() + 86400000);
            this.value = ""; document.getElementById('restriction-popup').style.background = "#22c55e";
            document.getElementById('restrict-title').innerText = "ìŠ¹ì¸ ì™„ë£Œ";
            document.getElementById('restriction-msg').innerText = "ì œí•œì´ í•´ì œë˜ì—ˆìŠµë‹ˆë‹¤! (24ì‹œê°„)";
            setTimeout(() => { document.getElementById('restriction-popup').style.display = 'none'; }, 2000);
        }
    };
};

// -----------------------------------------------------------
// 6. ê¸°íƒ€ ì‚¬ìœ  & ëˆˆ íš¨ê³¼ (ì›ë³¸ ë¡œì§ ìœ ì§€)
// -----------------------------------------------------------
window.openEtcModal = function(name, lane, callback) {
    const overlay = document.getElementById('custom-modal-overlay');
    const input = document.getElementById('custom-reason-input');
    const tableBody = document.getElementById('project-table-body');
    const recentList = document.getElementById('recent-reasons-list');
    const recentContainer = document.getElementById('recent-reasons-container');

    // 1. ì´ˆê¸°í™” ë° ì—´ê¸°
    overlay.style.display = 'flex';
    input.value = '';
    input.focus();

    // 2. ì˜¤ë¥¸ìª½ í”„ë¡œì íŠ¸ì‹¤ ëª©ë¡ ìƒì„±
    tableBody.innerHTML = '';
    PROJECT_DATA.forEach(d => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td style="font-weight:bold; color:#aaa;">${d.loc}</td>
            <td><button class="table-select-btn">${d.name}</button></td>
        `;
        tr.querySelector('button').onclick = () => {
            input.value = (d.loc ? d.loc + " " : "") + d.name;
            input.focus();
        };
        tableBody.appendChild(tr);
    });

    // 3. ì™¼ìª½ ìµœê·¼ ì‚¬ìœ  ëª©ë¡ ìƒì„±
    const saved = JSON.parse(localStorage.getItem('my_recent_reasons') || '[]');
    const fixed = ['ì§€ì—°ê·€êµ', 'ì™¸ì¶œ'];
    const allReasons = [...new Set([...saved, ...fixed])]; // ì¤‘ë³µ ì œê±°

    recentList.innerHTML = '';
    if (allReasons.length > 0) {
        recentContainer.style.display = 'block';
        allReasons.forEach(txt => {
            const btn = document.createElement('button');
            btn.className = 'recent-reason-btn';
            btn.innerText = txt;
            btn.onclick = () => { input.value = txt; input.focus(); };
            recentList.appendChild(btn);
        });
    }

    // 4. ì €ì¥ ë²„íŠ¼ ì´ë²¤íŠ¸
    document.getElementById('modal-btn-save').onclick = () => {
        const val = input.value.trim();
        if (val) {
            // ìµœê·¼ ì‚¬ìœ  ì €ì¥ ë¡œì§
            let list = JSON.parse(localStorage.getItem('my_recent_reasons') || '[]');
            if (!list.includes(val) && !fixed.includes(val)) {
                list.unshift(val);
                if (list.length > 5) list.pop();
                localStorage.setItem('my_recent_reasons', JSON.stringify(list));
            }
            overlay.style.display = 'none';
            callback(val);
        } else {
            alert("ì‚¬ìœ ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”!");
        }
    };

    // 5. ì·¨ì†Œ ë²„íŠ¼ ì´ë²¤íŠ¸
    document.getElementById('modal-btn-cancel').onclick = () => {
        overlay.style.display = 'none';
    };
};

function toggleSnow(checked) { isSnowActive = checked; if(!checked) { const c=document.getElementById('snow-canvas'); c.getContext('2d').clearRect(0,0,c.width,c.height); } }
(function() {
    const canvas = document.getElementById('snow-canvas'); const ctx = canvas.getContext('2d');
    let w = window.innerWidth, h = window.innerHeight; canvas.width = w; canvas.height = h;
    const flakes = []; let acc = 0;
    for(let i=0; i<80; i++) flakes.push({x:Math.random()*w, y:Math.random()*-h, r:Math.random()*2+1, s:Math.random()+0.5, o:Math.random()*0.5+0.3});
    function draw() {
        if(!isSnowActive) { requestAnimationFrame(draw); return; }
        ctx.clearRect(0,0,w,h);
        if(acc>0){ const g=ctx.createLinearGradient(0,h,0,h-acc); g.addColorStop(0,'rgba(255,255,255,0.4)'); g.addColorStop(1,'rgba(0,0,0,0)'); ctx.fillStyle=g; ctx.fillRect(0,h-acc,w,acc); }
        ctx.fillStyle='rgba(255,255,255,0.8)'; ctx.beginPath();
        flakes.forEach(f=>{ ctx.globalAlpha=f.o; ctx.moveTo(f.x,f.y); ctx.arc(f.x,f.y,f.r,0,Math.PI*2); f.y+=f.s; if(f.y>h){ if(acc<30 && Math.random()>0.99) acc+=0.05; f.y=-5; f.x=Math.random()*w; } });
        ctx.fill(); requestAnimationFrame(draw);
    }
    window.onresize = () => { w=window.innerWidth; h=window.innerHeight; canvas.width=w; canvas.height=h; }; draw();
})();

        // ì „ì—­ ë³€ìˆ˜ ì¶”ê°€
        let isInfiniteLoop = false;
        let currentBgmIndex = 0;

        // [ê¸°ì¡´ renderFeatures í•¨ìˆ˜ ë‚´ BGM ë²„íŠ¼ ìˆ˜ì •]
        // ... BGM ë²„íŠ¼ì˜ onclickì„ openModal('bgmListModal')ë¡œ ë³€ê²½í•˜ì„¸ìš” ...

        // BGM ë¦¬ìŠ¤íŠ¸ ëª¨ë‹¬ ì—´ê¸° ë° ë Œë”ë§
        function renderFullBgmList() {
            const container = document.getElementById('fullBgmList');
            container.innerHTML = '';
            
            BGM_LIST.forEach((bgm, index) => {
                const row = document.createElement('div');
                row.className = 'bgm-item-row';
                row.innerHTML = `
                    <img src="${bgm.cover}">
                    <span>${bgm.title}</span>
                `;
                row.onclick = () => {
                    isInfiniteLoop = false; // ì§ì ‘ ì„ íƒ ì‹œ ë¬´í•œ ì¬ìƒ ëª¨ë“œ í•´ì œ
                    updateLoopButtonUI();
                    currentBgmIndex = index;
                    tryPlayMusic(bgm);
                    closeModal('bgmListModal');
                };
                container.appendChild(row);
            });
        }

        // ë¬´í•œ ì¬ìƒ í† ê¸€ í•¨ìˆ˜
        function toggleInfiniteLoop() {
            isInfiniteLoop = !isInfiniteLoop;
            
            if (isInfiniteLoop) {
                // ì´ë¯¸ ë…¸ë˜ê°€ ì¬ìƒ ì¤‘ì´ë¼ë©´, ê·¸ ê³¡ì˜ ì¸ë±ìŠ¤ë¥¼ ì°¾ì•„ ì´ì–´ê°
                if (currentBgmData) {
                    const foundIndex = BGM_LIST.findIndex(b => b.src === currentBgmData.src);
                    if (foundIndex !== -1) currentBgmIndex = foundIndex;
                    alert("í˜„ì¬ ê³¡ë¶€í„° ì „ì²´ ë¬´í•œ ì¬ìƒ ëª¨ë“œê°€ ì‹œì‘ë©ë‹ˆë‹¤.");
                } else {
                    // ì¬ìƒ ì¤‘ì´ ì•„ë‹ ë•Œë§Œ 1ë²ˆ ê³¡ë¶€í„° ì‹œì‘
                    currentBgmIndex = 0;
                    tryPlayMusic(BGM_LIST[0]);
                    alert("ì²« ë²ˆì§¸ ê³¡ë¶€í„° ì „ì²´ ë¬´í•œ ì¬ìƒì´ ì‹œì‘ë©ë‹ˆë‹¤.");
                }
                
                // [ì¶”ê°€] ë¬´í•œ ì¬ìƒì´ ì¼œì§€ë©´ ë¦¬ìŠ¤íŠ¸ ì°½ì„ ìë™ìœ¼ë¡œ ë‹«ìŒ
                closeModal('bgmListModal');
            }
            
            updateLoopUI(); // ë²„íŠ¼ ìƒ‰ìƒ ë° í…ìŠ¤íŠ¸ ë³€ê²½
        }

        function updateLoopButtonUI() {
            const btn = document.getElementById('loopControlBtn');
            if (isInfiniteLoop) {
                btn.classList.add('active');
                btn.innerHTML = '<i class="fas fa-redo"></i> ì „ì²´ ë¬´í•œ ì¬ìƒ ON';
            } else {
                btn.classList.remove('active');
                btn.innerHTML = '<i class="fas fa-redo"></i> ì „ì²´ ë¬´í•œ ì¬ìƒ OFF';
            }
        }

        // [í•µì‹¬] ì˜¤ë””ì˜¤ ì¢…ë£Œ ì´ë²¤íŠ¸ ê°ì§€
        document.getElementById('bgm-audio').onended = function() {
            if (isInfiniteLoop) {
                // ë¬´í•œ ì¬ìƒ ëª¨ë“œ: ë‹¤ìŒ ê³¡ìœ¼ë¡œ
                currentBgmIndex++;
                if (currentBgmIndex >= BGM_LIST.length) currentBgmIndex = 0; // ë§ˆì§€ë§‰ ê³¡ì´ë©´ ì²˜ìŒìœ¼ë¡œ
                tryPlayMusic(BGM_LIST[currentBgmIndex]);
            } else {
                // ì¼ë°˜ ëª¨ë“œ: í”Œë ˆì´ì–´ ì¢…ë£Œ
                stopMusic(new Event('click')); // ìë™ìœ¼ë¡œ í”Œë ˆì´ì–´ UI ë‹«ê¸°
            }
        };



        // [ì´ìŠ¤í„°ì—ê·¸: ë ˆì œ - IRIS OUT 5ì—°íƒ€ ë²„ì „]
        let clickCount = 0;
        let lastClickTime = 0;
        let isVideoMode = false;
        let videoSyncInterval = null;
        
        const miniPlayerEl = document.getElementById('mini-player');
        const boomEl = document.getElementById('boom-container');
        const audioEl = document.getElementById('bgm-audio');
        const rezeVideo = document.getElementById('reze-video');
        
        const REZE_CONFIG = {
            start: 45,    
            end: 61,      
            videoOffset: 45 
        };
        
        // 1. 5ì—°íƒ€ ê°ì§€ í•¨ìˆ˜
        function handleEasterEggClick(e) {
            // íŠ¹ì • ë²„íŠ¼(ì¬ìƒ, ì •ì§€ ë“±)ì„ ëˆ„ë¥¼ ë•ŒëŠ” ì¹´ìš´íŠ¸í•˜ì§€ ì•ŠìŒ
            if (e.target.closest('.ctrl-btn')) return;
        
            // í˜„ì¬ ì¬ìƒ ì¤‘ì¸ ê³¡ì´ IRIS OUTì¸ì§€ í™•ì¸
            if (!currentBgmData || currentBgmData.title.replace(/\s/g,'').toUpperCase() !== "IRISOUT") {
                clickCount = 0;
                return;
            }
        
            const now = Date.now();
            
            // í´ë¦­ ê°„ê²©ì´ 0.8ì´ˆ ì´ìƒ ë²Œì–´ì§€ë©´ ì¹´ìš´íŠ¸ ì´ˆê¸°í™” (ì—°ì†ì„± ë³´ì¥)
            if (now - lastClickTime > 800) {
                clickCount = 1;
            } else {
                clickCount++;
            }
            
            lastClickTime = now;
        
            // 5ë²ˆ ì—°ì† í„°ì¹˜ ì„±ê³µ ì‹œ
            if (clickCount === 5) {
                console.log("ğŸ’¥ 5ì—°íƒ€ ì„±ê³µ! í­ë°œ ì‹œí€€ìŠ¤ ê°€ë™");
                clickCount = 0; // ì¹´ìš´íŠ¸ ì´ˆê¸°í™”
                triggerRezeBoom();
            }
        }
        
        // 2. ì´ë²¤íŠ¸ ì—°ê²° (ê¸°ì¡´ mousedown/mouseup/touchstart/touchend ëª¨ë‘ ì œê±° ê°€ëŠ¥)
        // miniPlayerElì— ì§ì ‘ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.
        miniPlayerEl.addEventListener('mousedown', handleEasterEggClick);
        
        // 3. ë©”ì¸ ì´ìŠ¤í„°ì—ê·¸ ì‹¤í–‰ ë¡œì§
        function triggerRezeBoom() {
            const currentTime = audioEl.currentTime;
        
            // 45ì´ˆ ~ 61ì´ˆ ì‚¬ì´ë©´ ì˜ìƒ, ì•„ë‹ˆë©´ í”¼ íŠ€ê¹€
            if (currentTime >= REZE_CONFIG.start && currentTime <= REZE_CONFIG.end) {
                runVideoEasterEgg();
            } else {
                runBloodSplat();
            }
        }
        
        // [A] ì˜ìƒ ì´ìŠ¤í„°ì—ê·¸ ì‹¤í–‰ (ê¸°ì¡´ê³¼ ë™ì¼)
        function runVideoEasterEgg() {
            if (!rezeVideo) return;
            isVideoMode = true;
        
            miniPlayerEl.classList.add('expanded', 'video-active');
            rezeVideo.style.display = 'block';
        
            rezeVideo.currentTime = Math.max(0, audioEl.currentTime - REZE_CONFIG.videoOffset);
            rezeVideo.play().catch(e => console.error(e));
        
            if (videoSyncInterval) clearInterval(videoSyncInterval);
            videoSyncInterval = setInterval(() => {
                if (!isPlaying || audioEl.currentTime > REZE_CONFIG.end || !isVideoMode) {
                    stopVideoEasterEgg();
                    clearInterval(videoSyncInterval);
                    return;
                }
                const expected = audioEl.currentTime - REZE_CONFIG.videoOffset;
                if (Math.abs(rezeVideo.currentTime - expected) > 0.2) {
                    rezeVideo.currentTime = expected;
                }
            }, 100);
        }
        
        function stopVideoEasterEgg() {
            isVideoMode = false;
            miniPlayerEl.classList.remove('video-active');
            if (rezeVideo) {
                rezeVideo.pause();
                rezeVideo.style.display = 'none';
            }
        }
        
        // [B] 3ë‹¨ í”¼ íŠ€ê¹€ ì´ìŠ¤í„°ì—ê·¸ (ê¸°ì¡´ê³¼ ë™ì¼)
        function runBloodSplat() {
            boomEl.classList.add('exploding-active');
            document.body.classList.add('shake-screen');
            setTimeout(() => {
                boomEl.classList.remove('exploding-active');
                document.body.classList.remove('shake-screen');
            }, 1200);
        
            miniPlayerEl.classList.add('blood-stained-container');
        
            const BLOOD_IMAGES = ["./asset/blood_1.png", "./asset/blood_1.png", "./asset/blood_1.png"];
            const createSplat = (url, t, l, w, delay) => {
                setTimeout(() => {
                    if (!miniPlayerEl.classList.contains('blood-stained-container')) return;
                    const img = document.createElement('img');
                    img.src = url;
                    img.className = 'blood-splat splat-animate';
                    img.style.cssText = `top:${t}; left:${l}; width:${w};`;
                    miniPlayerEl.appendChild(img);
                }, delay);
            };
        
            createSplat(BLOOD_IMAGES[0], "-5%", "-10%", "75%", 0);
            createSplat(BLOOD_IMAGES[1], "30%", "45%", "80%", 300);
            createSplat(BLOOD_IMAGES[2], "15%", "10%", "95%", 600);
        
            setTimeout(() => {
                miniPlayerEl.classList.remove('blood-stained-container');
                miniPlayerEl.querySelectorAll('.blood-splat').forEach(s => s.remove());
            }, 20000);
        }
        
        // [ì¤‘ìš”: í™•ì¥ í† ê¸€ í•¨ìˆ˜ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€]
        function toggleExpand(e) {
            if (isVideoMode) return; 
            if (!e.target.closest('.ctrl-btn')) {
                miniPlayerEl.classList.toggle('expanded');
            }
        }
    </script>
    <div id="galleryModal" class="modal-overlay">
            <div class="modal-window" style="max-width: 900px; height: 85vh; background: #2a2d35 !important; overflow: hidden;">
                <h2 style="color:white; margin:0 0 20px 0; text-align:center;"><i class="fas fa-images"></i> ê°¤ëŸ¬ë¦¬</h2>
                <div id="galleryContainer" class="gallery-grid"></div>
                <button onclick="closeModal('galleryModal')" style="margin-top:20px; background:#333; color:white; border:none; padding:15px; border-radius:10px; cursor:pointer; font-weight:700;">ë‹«ê¸°</button>
            </div>
        </div>

        <div id="largePhotoModal" class="modal-overlay" style="z-index: 30000;" onclick="this.style.display='none'">
        <img id="largePhotoImg" src="" style="max-width: 90%; max-height: 90%; border: 5px solid white; border-radius: 4px;">
        </div>

        <div id="bgmListModal" class="modal-overlay">
            <div class="modal-window bgm-modal-window">
                <h2 style="color:white; margin:0 0 15px 0;"><i class="fas fa-music"></i> BGM </h2>
                <button id="loopControlBtn" class="feature-btn loop-btn" onclick="toggleInfiniteLoop()">
                    <i class="fas fa-redo"></i> ì „ì²´ ë¬´í•œ ì¬ìƒ OFF
                </button>
                <div id="fullBgmList" class="bgm-list-scroll"></div>
                <button onclick="closeModal('bgmListModal')" style="margin-top:20px; background:#333; color:white; border:none; padding:10px; border-radius:8px; cursor:pointer; font-weight:700; width:100%;">ë‹«ê¸°</button>
            </div>
        </div>
    </body>
</html>
